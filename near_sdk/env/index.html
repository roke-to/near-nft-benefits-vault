<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Blockchain-specific methods available to the smart contract. This is a wrapper around a low-level `BlockchainInterface`. Unless you know what you are doing prefer using `env::*` whenever possible. In case of cross-contract calls prefer using even higher-level API available through `callback_args`, `callback_args_vec`, `ext_contract`, `Promise`, and `PromiseOrValue`."><meta name="keywords" content="rust, rustlang, rust-lang, env"><title>near_sdk::env - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../near_sdk/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../near_sdk/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module env</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../near_sdk/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">near_sdk</a>::<wbr><a class="mod" href="#">env</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/near_sdk/environment/env.rs.html#1-1024">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Blockchain-specific methods available to the smart contract. This is a wrapper around a
low-level <code>BlockchainInterface</code>. Unless you know what you are doing prefer using <code>env::*</code>
whenever possible. In case of cross-contract calls prefer using even higher-level API available
through <code>callback_args</code>, <code>callback_args_vec</code>, <code>ext_contract</code>, <code>Promise</code>, and <code>PromiseOrValue</code>.</p>
</div></details><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.STORAGE_PRICE_PER_BYTE.html" title="near_sdk::env::STORAGE_PRICE_PER_BYTE constant">STORAGE_PRICE_PER_BYTE</a></div><div class="item-right docblock-short"><p>Price per 1 byte of storage from mainnet genesis config.
TODO: will be using the host function when it will be available.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.abort.html" title="near_sdk::env::abort fn">abort</a></div><div class="item-right docblock-short"><p>Aborts the current contract execution without a custom message.
To include a message, use <a href="fn.panic_str.html" title="panic_str"><code>panic_str</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.account_balance.html" title="near_sdk::env::account_balance fn">account_balance</a></div><div class="item-right docblock-short"><p>The balance attached to the given account. This includes the attached_deposit that was
attached to the transaction</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.account_locked_balance.html" title="near_sdk::env::account_locked_balance fn">account_locked_balance</a></div><div class="item-right docblock-short"><p>The balance locked for potential validator staking.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.attached_deposit.html" title="near_sdk::env::attached_deposit fn">attached_deposit</a></div><div class="item-right docblock-short"><p>The balance that was attached to the call that will be immediately deposited before the
contract execution starts</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.block_height.html" title="near_sdk::env::block_height fn">block_height</a></div><div class="item-right docblock-short"><p>Returns the height of the block the transaction is being executed in.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.block_index.html" title="near_sdk::env::block_index fn">block_index</a><span class="stab deprecated" title="">Deprecated</span></div><div class="item-right docblock-short"><p>Current block index.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.block_timestamp.html" title="near_sdk::env::block_timestamp fn">block_timestamp</a></div><div class="item-right docblock-short"><p>Current block timestamp, i.e, number of non-leap-nanoseconds since January 1, 1970 0:00:00 UTC.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.block_timestamp_ms.html" title="near_sdk::env::block_timestamp_ms fn">block_timestamp_ms</a></div><div class="item-right docblock-short"><p>Current block timestamp, i.e, number of non-leap-milliseconds since January 1, 1970 0:00:00 UTC.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.current_account_id.html" title="near_sdk::env::current_account_id fn">current_account_id</a></div><div class="item-right docblock-short"><p>The id of the account that owns the current contract.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.epoch_height.html" title="near_sdk::env::epoch_height fn">epoch_height</a></div><div class="item-right docblock-short"><p>Current epoch height.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.input.html" title="near_sdk::env::input fn">input</a></div><div class="item-right docblock-short"><p>The input to the contract call serialized as bytes. If input is not provided returns <code>None</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_valid_account_id.html" title="near_sdk::env::is_valid_account_id fn">is_valid_account_id</a></div><div class="item-right docblock-short"><p>Returns <code>true</code> if the given account ID is valid and <code>false</code> otherwise.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.keccak256.html" title="near_sdk::env::keccak256 fn">keccak256</a></div><div class="item-right docblock-short"><p>Hashes the random sequence of bytes using keccak256.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.keccak256_array.html" title="near_sdk::env::keccak256_array fn">keccak256_array</a></div><div class="item-right docblock-short"><p>Hashes the bytes using the Keccak-256 hash function. This returns a 32 byte hash.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.keccak512.html" title="near_sdk::env::keccak512 fn">keccak512</a></div><div class="item-right docblock-short"><p>Hashes the random sequence of bytes using keccak512.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.keccak512_array.html" title="near_sdk::env::keccak512_array fn">keccak512_array</a></div><div class="item-right docblock-short"><p>Hashes the bytes using the Keccak-512 hash function. This returns a 64 byte hash.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.log.html" title="near_sdk::env::log fn">log</a><span class="stab deprecated" title="">Deprecated</span></div><div class="item-right docblock-short"><p>Log the UTF-8 encodable message.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.log_str.html" title="near_sdk::env::log_str fn">log_str</a></div><div class="item-right docblock-short"><p>Logs the string message message. This message is stored on chain.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.panic.html" title="near_sdk::env::panic fn">panic</a><span class="stab deprecated" title="">Deprecated</span></div><div class="item-right docblock-short"><p>Terminates the execution of the program with the UTF-8 encoded message.
<a href="fn.panic_str.html" title="panic_str"><code>panic_str</code></a> should be used as the bytes are required to be UTF-8</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.panic_str.html" title="near_sdk::env::panic_str fn">panic_str</a></div><div class="item-right docblock-short"><p>Terminates the execution of the program with the UTF-8 encoded message.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.predecessor_account_id.html" title="near_sdk::env::predecessor_account_id fn">predecessor_account_id</a></div><div class="item-right docblock-short"><p>The id of the account that was the previous contract in the chain of cross-contract calls.
If this is the first contract, it is equal to <code>signer_account_id</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.prepaid_gas.html" title="near_sdk::env::prepaid_gas fn">prepaid_gas</a></div><div class="item-right docblock-short"><p>The amount of gas attached to the call that can be used to pay for the gas fees.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_and.html" title="near_sdk::env::promise_and fn">promise_and</a></div><div class="item-right docblock-short"><p>Creates a new promise which completes when time all promises passed as arguments complete.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_add_key_with_full_access.html" title="near_sdk::env::promise_batch_action_add_key_with_full_access fn">promise_batch_action_add_key_with_full_access</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_add_key_with_function_call.html" title="near_sdk::env::promise_batch_action_add_key_with_function_call fn">promise_batch_action_add_key_with_function_call</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_create_account.html" title="near_sdk::env::promise_batch_action_create_account fn">promise_batch_action_create_account</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_delete_account.html" title="near_sdk::env::promise_batch_action_delete_account fn">promise_batch_action_delete_account</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_delete_key.html" title="near_sdk::env::promise_batch_action_delete_key fn">promise_batch_action_delete_key</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_deploy_contract.html" title="near_sdk::env::promise_batch_action_deploy_contract fn">promise_batch_action_deploy_contract</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_function_call.html" title="near_sdk::env::promise_batch_action_function_call fn">promise_batch_action_function_call</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_function_call_weight.html" title="near_sdk::env::promise_batch_action_function_call_weight fn">promise_batch_action_function_call_weight</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_stake.html" title="near_sdk::env::promise_batch_action_stake fn">promise_batch_action_stake</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_action_transfer.html" title="near_sdk::env::promise_batch_action_transfer fn">promise_batch_action_transfer</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_create.html" title="near_sdk::env::promise_batch_create fn">promise_batch_create</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_batch_then.html" title="near_sdk::env::promise_batch_then fn">promise_batch_then</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_create.html" title="near_sdk::env::promise_create fn">promise_create</a></div><div class="item-right docblock-short"><p>Creates a promise that will execute a method on account with given arguments and attaches
the given amount and gas.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_result.html" title="near_sdk::env::promise_result fn">promise_result</a></div><div class="item-right docblock-short"><p>If the current function is invoked by a callback we can access the execution results of the
promises that caused the callback.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_results_count.html" title="near_sdk::env::promise_results_count fn">promise_results_count</a></div><div class="item-right docblock-short"><p>If the current function is invoked by a callback we can access the execution results of the
promises that caused the callback. This function returns the number of complete and
incomplete callbacks.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_return.html" title="near_sdk::env::promise_return fn">promise_return</a></div><div class="item-right docblock-short"><p>Consider the execution result of promise under <code>promise_idx</code> as execution result of this
function.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.promise_then.html" title="near_sdk::env::promise_then fn">promise_then</a></div><div class="item-right docblock-short"><p>Attaches the callback that is executed after promise pointed by <code>promise_idx</code> is complete.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.random_seed.html" title="near_sdk::env::random_seed fn">random_seed</a></div><div class="item-right docblock-short"><p>Returns the random seed from the current block. This 32 byte hash is based on the VRF value from
the block. This value is not modified in any way each time this function is called within the
same method/block.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.random_seed_array.html" title="near_sdk::env::random_seed_array fn">random_seed_array</a></div><div class="item-right docblock-short"><p>Returns the random seed from the current block. This 32 byte hash is based on the VRF value from
the block. This value is not modified in any way each time this function is called within the
same method/block.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_register.html" title="near_sdk::env::read_register fn">read_register</a></div><div class="item-right docblock-short"><p>Reads the content of the <code>register_id</code>. If register is not used returns <code>None</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.register_len.html" title="near_sdk::env::register_len fn">register_len</a></div><div class="item-right docblock-short"><p>Returns the size of the register. If register is not used returns <code>None</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.ripemd160_array.html" title="near_sdk::env::ripemd160_array fn">ripemd160_array</a></div><div class="item-right docblock-short"><p>Hashes the bytes using the RIPEMD-160 hash function. This returns a 20 byte hash.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set_blockchain_interface.html" title="near_sdk::env::set_blockchain_interface fn">set_blockchain_interface</a></div><div class="item-right docblock-short"><p>Replaces the current low-level blockchain interface accessible through <code>env::*</code> with another
low-level blockchain interfacr that implements <code>BlockchainInterface</code> trait. In most cases you
want to use <code>testing_env!</code> macro to set it.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.setup_panic_hook.html" title="near_sdk::env::setup_panic_hook fn">setup_panic_hook</a></div><div class="item-right docblock-short"><p>Setups panic hook to expose error info to the blockchain.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.sha256.html" title="near_sdk::env::sha256 fn">sha256</a></div><div class="item-right docblock-short"><p>Hashes the random sequence of bytes using sha256.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.sha256_array.html" title="near_sdk::env::sha256_array fn">sha256_array</a></div><div class="item-right docblock-short"><p>Hashes the bytes using the SHA-256 hash function. This returns a 32 byte hash.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.signer_account_id.html" title="near_sdk::env::signer_account_id fn">signer_account_id</a></div><div class="item-right docblock-short"><p>The id of the account that either signed the original transaction or issued the initial
cross-contract call.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.signer_account_pk.html" title="near_sdk::env::signer_account_pk fn">signer_account_pk</a></div><div class="item-right docblock-short"><p>The public key of the account that did the signing.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.state_exists.html" title="near_sdk::env::state_exists fn">state_exists</a></div><div class="item-right docblock-short"><p>Returns <code>true</code> if the contract state exists and <code>false</code> otherwise.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.state_read.html" title="near_sdk::env::state_read fn">state_read</a></div><div class="item-right docblock-short"><p>Load the state of the given object.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.state_write.html" title="near_sdk::env::state_write fn">state_write</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.storage_byte_cost.html" title="near_sdk::env::storage_byte_cost fn">storage_byte_cost</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.storage_get_evicted.html" title="near_sdk::env::storage_get_evicted fn">storage_get_evicted</a></div><div class="item-right docblock-short"><p>Reads the most recent value that was evicted with <code>storage_write</code> or <code>storage_remove</code> command.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.storage_has_key.html" title="near_sdk::env::storage_has_key fn">storage_has_key</a></div><div class="item-right docblock-short"><p>Checks if there is a key-value in the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.storage_read.html" title="near_sdk::env::storage_read fn">storage_read</a></div><div class="item-right docblock-short"><p>Reads the value stored under the given key.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.storage_remove.html" title="near_sdk::env::storage_remove fn">storage_remove</a></div><div class="item-right docblock-short"><p>Removes the value stored under the given key.
If key-value existed returns <code>true</code>, otherwise <code>false</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.storage_usage.html" title="near_sdk::env::storage_usage fn">storage_usage</a></div><div class="item-right docblock-short"><p>Current total storage usage of this smart contract that this account would be paying for.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.storage_write.html" title="near_sdk::env::storage_write fn">storage_write</a></div><div class="item-right docblock-short"><p>Writes key-value into storage.
If another key-value existed in the storage with the same key it returns <code>true</code>, otherwise <code>false</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.used_gas.html" title="near_sdk::env::used_gas fn">used_gas</a></div><div class="item-right docblock-short"><p>The gas that was already burnt during the contract execution (cannot exceed <code>prepaid_gas</code>)</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.validator_stake.html" title="near_sdk::env::validator_stake fn">validator_stake</a></div><div class="item-right docblock-short"><p>For a given account return its current stake. If the account is not a validator, returns 0.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.validator_total_stake.html" title="near_sdk::env::validator_total_stake fn">validator_total_stake</a></div><div class="item-right docblock-short"><p>Returns the total stake of validators in the current epoch.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.value_return.html" title="near_sdk::env::value_return fn">value_return</a></div><div class="item-right docblock-short"><p>Sets the blob of data as the return value of the contract.</p>
</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="near_sdk" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.64.0 (a55dd71d5 2022-09-19)" ></div></body></html>