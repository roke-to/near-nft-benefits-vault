<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Collections that offer an alternative to standard containers from `std::collections::*` by utilizing the underlying blockchain trie storage more efficiently."><meta name="keywords" content="rust, rustlang, rust-lang, collections"><title>near_sdk::collections - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../near_sdk/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../near_sdk/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module collections</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../near_sdk/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">near_sdk</a>::<wbr><a class="mod" href="#">collections</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/near_sdk/collections/mod.rs.html#1-72">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Collections that offer an alternative to standard containers from <code>std::collections::*</code> by
utilizing the underlying blockchain trie storage more efficiently.</p>
<p>For example, the following smart contract does not work with state efficiently, because it will
load the entire <code>HashMap</code> at the beginning of the contract call, and will save it entirely at
the end, in cases when there is state modification. This is fine for small number of elements,
but very inefficient for large numbers.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>
<span class="attribute">#[<span class="ident">near_bindgen</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">BorshDeserialize</span>, <span class="ident">BorshSerialize</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">StatusMessage</span> {
   <span class="ident">records</span>: <span class="ident">HashMap</span><span class="op">&lt;</span><span class="ident">String</span>, <span class="ident">String</span><span class="op">&gt;</span>,
}</code></pre></div>
<p>The following is an efficient alternative. It will load each element individually only when it is
read and will save it only when it is written/removed.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>
<span class="attribute">#[<span class="ident">near_bindgen</span>]</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">BorshDeserialize</span>, <span class="ident">BorshSerialize</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">StatusMessage</span> {
   <span class="ident">records</span>: <span class="ident">LookupMap</span><span class="op">&lt;</span><span class="ident">String</span>, <span class="ident">String</span><span class="op">&gt;</span>,
}</code></pre></div>
<p>The efficiency of <code>LookupMap</code> comes at the cost, since it has fewer methods than <code>HashMap</code> and is not
that seemlessly integrated with the rest of the Rust standard library.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.Vector"><code>pub use vector::<a class="struct" href="vector/struct.Vector.html" title="struct near_sdk::collections::vector::Vector">Vector</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item" id="reexport.UnorderedMap"><code>pub use unordered_map::<a class="struct" href="unordered_map/struct.UnorderedMap.html" title="struct near_sdk::collections::unordered_map::UnorderedMap">UnorderedMap</a>;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="unordered_map/index.html" title="near_sdk::collections::unordered_map mod">unordered_map</a></div><div class="item-right docblock-short"><p>A map implemented on a trie. Unlike <code>std::collections::HashMap</code> the keys in this map are not
hashed but are instead serialized.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="vector/index.html" title="near_sdk::collections::vector mod">vector</a></div><div class="item-right docblock-short"><p>A vector implemented on a trie. Unlike standard vector does not support insertion and removal
of an element results in the last element being placed in the empty position.</p>
</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LazyOption.html" title="near_sdk::collections::LazyOption struct">LazyOption</a></div><div class="item-right docblock-short"><p>An persistent lazy option, that stores a value in the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LegacyTreeMap.html" title="near_sdk::collections::LegacyTreeMap struct">LegacyTreeMap</a></div><div class="item-right docblock-short"><p>TreeMap based on AVL-tree</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LookupMap.html" title="near_sdk::collections::LookupMap struct">LookupMap</a></div><div class="item-right docblock-short"><p>An non-iterable implementation of a map that stores its content directly on the trie.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LookupSet.html" title="near_sdk::collections::LookupSet struct">LookupSet</a></div><div class="item-right docblock-short"><p>An non-iterable implementation of a set that stores its content directly on the trie.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TreeMap.html" title="near_sdk::collections::TreeMap struct">TreeMap</a></div><div class="item-right docblock-short"><p>TreeMap based on AVL-tree</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.UnorderedSet.html" title="near_sdk::collections::UnorderedSet struct">UnorderedSet</a></div><div class="item-right docblock-short"><p>An iterable implementation of a set that stores its content directly on the trie.</p>
</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ERR_ELEMENT_DESERIALIZATION.html" title="near_sdk::collections::ERR_ELEMENT_DESERIALIZATION constant">ERR_ELEMENT_DESERIALIZATION</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ERR_ELEMENT_SERIALIZATION.html" title="near_sdk::collections::ERR_ELEMENT_SERIALIZATION constant">ERR_ELEMENT_SERIALIZATION</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ERR_INCONSISTENT_STATE.html" title="near_sdk::collections::ERR_INCONSISTENT_STATE constant">ERR_INCONSISTENT_STATE</a></div><div class="item-right docblock-short"></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="near_sdk" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.64.0 (a55dd71d5 2022-09-19)" ></div></body></html>